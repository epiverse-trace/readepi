<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="readepi">
<title>readepi: Reading data from health information systems • readepi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="readepi: Reading data from health information systems">
<meta property="og:description" content="readepi">
<meta property="og:image" content="https://epiverse-trace.github.io/readepi/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark" data-bs-theme="dark"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">readepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/readepi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {readepi}</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/readepi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>readepi: Reading data from health information systems</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/readepi/blob/HEAD/vignettes/readepi.Rmd" class="external-link"><code>vignettes/readepi.Rmd</code></a></small>
      <div class="d-none name"><code>readepi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Health-related data in general, and epidemiological data in
particular, are stored in files, relation database management systems
(RDBMS), or health information systems (HIS). Each category includes
numerous options, such as various file formats, RDBMS types, and HIS
APIs. Import data from such repositories involve the usage of different
format-specific functions or API-specific packages, which is an
exhausting task for end users.</p>
<p>The main objective of <strong>{readepi}</strong> package is to
simplify the process of reading health-related data from diverse
sources, allowing the user to focus more on downstream analysis tasks.
<strong>{readepi}</strong> also streamlines the way data is read into a
single function —it imports data from a specified systems (can be SQL
database, or HIS API) using the <code><a href="../reference/readepi.html">readepi()</a></code> function, which
returns a <code>list</code> object containing one or more data
frames.</p>
<p>The current implementation of <strong>{readepi}</strong> provides a
function for reading data from three common HIS: (<a href="https://www.project-redcap.org/" class="external-link">REDCap</a>, <a href="https://dhis2.org/" class="external-link">DHIS2</a>, and <a href="https://fingertips.phe.org.uk/" class="external-link">Fingertips</a>), and RDBMS such as
MS SQL, MySQL, and PostgreSQL. Other utility functions for processing
and manipulating the imported data, such as row or column sub-setting,
are also included in this package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># LOAD readepi</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/readepi/">readepi</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reading-data-from-rdbms">Reading data from RDBMS<a class="anchor" aria-label="anchor" href="#reading-data-from-rdbms"></a>
</h2>
<p>Health related research data are usually stored in either relational
databases or non-SQL databases. For example, at <a href="https://www.lshtm.ac.uk/research/units/mrc-gambia" class="external-link">MRCG@LSHTM</a>,
projects data are stored in relational databases. A SQL-based database
is run under a specific sever. The current version of the
<strong>{readepi}</strong> package supports reading data from MS SQL,
MySQL, and PostgreSQL servers.</p>
<p>To read data from a MS SQL database, the user is expected to have, at
least, read access to the database. The user credential details should
be stored in file. Also, users who are using an operating system other
than Microsoft need to have the appropriate MS driver installed into
their system. In the following section we show how to install these
drivers and describe the structure of the credentials file.</p>
<div class="section level3">
<h3 id="ms-sql-drivers-for-osx-based-systems">MS SQL drivers for OSX-based systems<a class="anchor" aria-label="anchor" href="#ms-sql-drivers-for-osx-based-systems"></a>
</h3>
<p>Reading data from Unix-based systems require to install an MS ODBC
driver that is compatible with the version of the target MS SQL server.
For example, <strong><em>ODBC Driver 17</em></strong> is compatible with
<strong><em>SQL server 2019, version 15.0</em></strong>.</p>
<p>Mac users can follow the instructions below to install the MS SQL
ODBC driver. Choose the appropriate driver, open the terminal, and run
these instructions.</p>
<ol style="list-style-type: decimal">
<li>installation of MS SQL driver 17 on Mac</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="va">driver</span><span class="op">=</span>17</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">brew</span> install unixodbc</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">brew</span> tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="ex">brew</span> update</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="ex">brew</span> install msodbcsql<span class="va">${driver}</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="ex">brew</span> install mssql-tools</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="va">ODBCSYSINI</span><span class="op">=</span>/</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>installation of MS SQL driver 13.1 on Mac</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">brew</span> install unixodbc</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">brew</span> tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">brew</span> update</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="ex">brew</span> install msodbcsql@13.1.9.2</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="ex">brew</span> install mssql-tools@14.0.6.0</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="va">ODBCSYSINI</span><span class="op">=</span>/</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ms-sql-drivers-for-linux-based-systems">MS SQL drivers for Linux-based systems<a class="anchor" aria-label="anchor" href="#ms-sql-drivers-for-linux-based-systems"></a>
</h3>
<p>Note that this requires <strong>Ubuntu 16.04 and above</strong>.
Choose the appropriate driver, open the terminal and type the
instructions below:</p>
<ol style="list-style-type: decimal">
<li>installation of MS SQL driver version 17 on <code>Ubuntu</code>
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="va">driver</span><span class="op">=</span>17</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">sudo</span> su</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">curl</span> https://packages.microsoft.com/keys/microsoft.asc <span class="kw">|</span> <span class="ex">apt-key</span> add <span class="at">-</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="ex">curl</span> https://packages.microsoft.com/config/ubuntu/<span class="va">$(</span><span class="ex">lsb_release</span> <span class="at">-rs</span><span class="va">)</span>/prod.list <span class="op">&gt;</span> /etc/apt/sources.list.d/mssql-release.list</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="fu">sudo</span> ACCEPT_EULA=Y apt-get install <span class="at">-y</span> msodbcsql<span class="va">${driver}</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="fu">sudo</span> ACCEPT_EULA=Y apt-get install <span class="at">-y</span> mssql-tools</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'export PATH="$PATH:/opt/mssql-tools/bin"'</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> unixodbc-dev</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>installation of MS SQL driver version 13.1 on
<code>Ubuntu</code>
</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">sudo</span> su</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">curl</span> https://packages.microsoft.com/keys/microsoft.asc <span class="kw">|</span> <span class="ex">apt-key</span> add <span class="at">-</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="ex">curl</span> https://packages.microsoft.com/config/ubuntu/16.04/prod.list <span class="op">&gt;</span> /etc/apt/sources.list.d/mssql-release.list</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="fu">sudo</span> ACCEPT_EULA=Y apt-get install msodbcsql</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="fu">sudo</span> ACCEPT_EULA=Y apt-get install mssql-tools</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'export PATH="$PATH:/opt/mssql-tools/bin"'</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="fu">sudo</span> apt-get install unixodbc-dev</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>installation of MS SQL driver on other Linux distributions</li>
</ol>
<p>To install an MS SQL driver for other Linux distributions, such as
Debian and Fedora, click <a href="https://learn.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver15&amp;tabs=ubuntu18-install%2Cubuntu17-install%2Cubuntu16-install%2Cubuntu16-13-install%2Crhel7-offline" class="external-link">here</a>
and follow the instructions. After the installation, check the installed
drivers using:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">odbc</span><span class="fu">::</span><span class="fu"><a href="https://odbc.r-dbi.org/reference/odbcListDrivers.html" class="external-link">odbcListDrivers</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If this command does not return the list of installed drivers or if
you are facing issues during the driver installation process, consult <a href="https://github.com/r-dbi/odbc#installation" class="external-link">the odbc github
page</a> or the <a href="https://learn.microsoft.com/en-us/sql/connect/odbc/linux-mac/install-microsoft-odbc-driver-sql-server-macos?view=sql-server-ver15" class="external-link">MS
documentation on this topic</a>.</p>
<p>It is also important to view the data stored in the MS SQL server.
For that purpose, we recommend you to install a graphical user interface
(GUI) such as <code>Azure Data Studio</code>.</p>
</div>
<div class="section level3">
<h3 id="main-arguments">Main arguments<a class="anchor" aria-label="anchor" href="#main-arguments"></a>
</h3>
<p>The <code><a href="../reference/readepi.html">readepi()</a></code> function expects the following
arguments:</p>
<ul>
<li>
<code>data_source</code>: (required) this is the URL of the target
HIS.</li>
<li>
<code>records</code>: (optional) a vector or a comma-separated
string of subject IDs. When specified, only the records that correspond
to these subjects will be imported.</li>
<li>
<code>fields</code>: (optional) a vector or a comma-separated string
of column names. If provided, only those columns will be imported.</li>
<li>
<code>id_position</code>: (optional) the column position of the
variable that unique identifies the subjects. It’s default value is
1.</li>
<li>
<code>id_col_name</code>: (optional) the name of the column that
unique identifies the subjects.</li>
</ul>
<div class="section level4">
<h4 id="credentials-file">Credentials file<a class="anchor" aria-label="anchor" href="#credentials-file"></a>
</h4>
<p>The access to data stored in a database management system requires
valid user credentials, such as a user name and password. The
<strong>{readepi}</strong> package expect that the user credential
details to be saved in a tab-separated file. The path to that constitute
the value for the <code>credentials_file</code> argument of the
<code><a href="../reference/readepi.html">readepi()</a></code> function.</p>
<p>This credential (tab-delimited) file must contain the following
columns:</p>
<ol style="list-style-type: decimal">
<li>
<code>user_name</code>: the user name. </li>
<li>
<code>password</code>: the user password (in REDCap, this
corresponds to token). </li>
<li>
<code>host_name</code>: the host name (in REDCap, this corresponds
to the host URL). <br>
</li>
<li>
<code>project_id</code>: the name of the database (for relation DB)
or the name of project (for REDCap API) that contains data of
interest. </li>
<li>
<code>comment</code>: (optional) a brief description of the project
or database of interest. <br>
</li>
<li>
<code>dbms</code>: the type of the DBMS. Possible values are:
<code>REDCap</code> when reading from REDCap; <code>MySQL</code> when
reading from a MySQL server, <code>SQLServer</code> when reading from an
MS SQL server, <code>PostgreSQL</code> when reading from a PostgreSQL
system. <br>
</li>
<li>
<code>port</code>: (optional) the port ID, this is only used for MS
SQL servers.</li>
</ol>
<p>To see the structure of a credentials file used as a template in the
<strong>{readepi}</strong> package, use the
<code><a href="../reference/show_example_file.html">show_example_file()</a></code> function as shown below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DISPLAY THE STRUCTURE OF THE TEMPLATE CREDENTIALS FILE</span></span>
<span><span class="fu"><a href="../reference/show_example_file.html">show_example_file</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   user_name                         password                          host_name</span></span>
<span><span class="co">#&gt; 1     admin                         district      https://play.im.dhis2.org/dev</span></span>
<span><span class="co">#&gt; 2    rfamro                                         mysql-rfam-public.ebi.ac.uk</span></span>
<span><span class="co">#&gt; 3     kmane 9A81268476645C4E5F03428B8AC3AA7B https://bbmc.ouhsc.edu/redcap/api/</span></span>
<span><span class="co">#&gt;   project_id                          comment   dbms port</span></span>
<span><span class="co">#&gt; 1 DHIS2_DEMO      this is a test DHIS2 server  DHIS2   NA</span></span>
<span><span class="co">#&gt; 2       Rfam      this is a test MySQL server  MySQL 4497</span></span>
<span><span class="co">#&gt; 3    SD_DATA testing access to REDCap project REDCap   NA</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>This section contains various examples demonstrating how
<strong>{readepi}</strong> imports data from databases. We assume that
the credentials are stored in a file as explained above. Furthermore,
these examples are based on a MySQL server that does not need the user
to supply the <code>driver name</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DEFINING THE PATH TO THE TEMPLATE CREDENTIALS FILE</span></span>
<span><span class="va">credentials_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test.ini"</span>, package <span class="op">=</span> <span class="st">"readepi"</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="listing-names-of-all-tables-in-a-database">Listing names of all tables in a database<a class="anchor" aria-label="anchor" href="#listing-names-of-all-tables-in-a-database"></a>
</h4>
<p>To display list of tables from a database of interest, use:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_tables.html">show_tables</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># use driver_name = "ODBC Driver 17 for SQL Server" when reading from MS SQL</span></span>
<span><span class="co"># server</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fetching-data-from-a-mysql-server-using-the-table-names">Fetching data from a MySQL server using the table names<a class="anchor" aria-label="anchor" href="#fetching-data-from-a-mysql-server-using-the-table-names"></a>
</h4>
<p>When importing data from <strong>MS SQL, MySQL and PostgreSQL
servers</strong>, the user needs to provide the following additional
arguments:</p>
<ul>
<li>
<code>driver_name</code>: the name of the MS driver (only for MS SQL
servers).</li>
<li>
<code>from</code>: the name of the table from which the data will be
fetched. This can also be the SQL query to be used for fetching data
from the system.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># VISUALIZING THE FIRST 5 ROWS OF THE TABLE 'author'</span></span>
<span><span class="fu"><a href="../reference/visualise_table.html">visualise_table</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"author"</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING ALL FIELDS AND ALL RECORDS FROM ONE TABLE (`author`)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"author"</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIED FIELDS AND ALL RECORDS FROM ONE TABLE</span></span>
<span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="st">"author_id,name,last_name,initials"</span></span>
<span><span class="va">dat</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"author"</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span> <span class="co"># these are  the columns of interest.</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIED RECORDS AND ALL FIELDS FROM ONE TABLE</span></span>
<span><span class="va">records</span> <span class="op">&lt;-</span> <span class="st">"1, 34, 15, 70, 118, 20"</span></span>
<span><span class="va">dat</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"author"</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  id_position      <span class="op">=</span> <span class="fl">1L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIED FIELDS AND RECORDS ONE THE TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"author"</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span>,</span>
<span>  id_col_name      <span class="op">=</span> <span class="st">"author_id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING DATA FROM SEVERAL TABLES</span></span>
<span><span class="va">table_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"author"</span>, <span class="st">"family_author"</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="va">table_names</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING DATA FROM SEVERAL TABLES AND SUBSETTING FIELDS ACROSS TABLES</span></span>
<span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"author_id,name,last_name,initials"</span>,</span>
<span>  <span class="st">"rfam_acc,author_id"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># the first string in the field vector corresponds to the name of the</span></span>
<span><span class="co"># columns of interest from the first table specified in the `table_names`</span></span>
<span><span class="co"># argument and so on...</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="va">table_names</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING DATA FROM SEVERAL TABLES AND SUBSETTING RECORDS ACROSS TABLES</span></span>
<span><span class="va">records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"1, 34, 15, 70, 118, 20"</span>,</span>
<span>  <span class="st">"RF00591,RF01420,RF01421"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># "note that first string in the records vector corresponds to the records of</span></span>
<span><span class="co"># interest from the first table specified in the `table_name` argument and so</span></span>
<span><span class="co"># on... when the id column is not the first column in a table,</span></span>
<span><span class="co"># use the `id_position`"</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="va">table_names</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  id_position      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING DATA FROM SEVERAL TABLES AND SUBSETTING RECORDS AND FIELDS ACROSS</span></span>
<span><span class="co"># TABLES</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="va">table_names</span>, <span class="co"># this is the table name</span></span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span>,</span>
<span>  id_col_name      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"author_id"</span>, <span class="st">"rfam_acc"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fetching-data-using-an-sql-query">Fetching data using an SQL query<a class="anchor" aria-label="anchor" href="#fetching-data-using-an-sql-query"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># SELECT FEW COLUMNS FROM ONE TABLE AND LEFT JOIN WITH ANOTHER TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"select author.author_id, author.name,</span></span>
<span><span class="st">  family_author.author_id from author left join family_author on</span></span>
<span><span class="st">  author.author_id = family_author.author_id"</span>,</span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SELECT ALL DATA FROM THE author TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"select * from author"</span>,</span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SELECT FEW COLUMNS FROM THE author TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"select author_id, name, last_name from author"</span>,</span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SELECT FEW RECORDS FROM THE author TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"select * from author where author_id in ('1','20','50')"</span>,</span>
<span>  driver_name <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SELECT FEW RECORDS AND FIELDS FROM THE author TABLE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"mysql-rfam-public.ebi.ac.uk"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  from             <span class="op">=</span> <span class="st">"select author_id, name, last_name from author where</span></span>
<span><span class="st">  author_id in ('1','20','50')"</span>,</span>
<span>  driver_name      <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="reading-data-from-his">Reading data from HIS<a class="anchor" aria-label="anchor" href="#reading-data-from-his"></a>
</h2>
<p>The current version of <strong>{readepi}</strong> supports reading
data from three common HIS: <strong>REDCap</strong>,
<strong>DHIS2</strong>, and <strong>Fingertips</strong>.</p>
<div class="section level3">
<h3 id="importing-data-from-redcap">Importing data from REDCap<a class="anchor" aria-label="anchor" href="#importing-data-from-redcap"></a>
</h3>
<p>Research Electronic Data Capture (<a href="https://www.project-redcap.org/" class="external-link">REDCap</a>) is a web-based
application and workflow methodology for designing clinical and
translational research databases. To import data from a REDCap-based
repo, the <code><a href="../reference/readepi.html">readepi()</a></code> function takes the following
arguments:</p>
<ul>
<li>
<code>data_source</code>: the URL of the REDCap server
(mandatory)</li>
<li>
<code>credentials_file</code>: the credentials file (mandatory)</li>
<li>
<code>records</code>: the list of the desired records
(optional)</li>
<li>
<code>fields</code>: the list of the desired columns (optional)</li>
</ul>
<p>Both the data and its associated metadata will be returned after a
successful import.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># READING ALL FIELDS AND RECORDS FROM A REDCap PROJECT</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"https://bbmc.ouhsc.edu/redcap/api/"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span></span>
<span><span class="op">)</span></span>
<span><span class="va">project_data</span>     <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">project_metadeta</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[[</span><span class="st">"metadata"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># READING SPECIFIC FIELDS AND ALL RECORDS FROM THE PROJECT</span></span>
<span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"record_id"</span>, <span class="st">"name_first"</span>, <span class="st">"age"</span>, <span class="st">"bmi"</span><span class="op">)</span></span>
<span><span class="va">dat</span>    <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"https://bbmc.ouhsc.edu/redcap/api/"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIC RECORDS AND ALL FIELDS FROM THE PROJECT</span></span>
<span><span class="va">records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"3"</span>, <span class="st">"5"</span><span class="op">)</span></span>
<span><span class="va">dat</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"https://bbmc.ouhsc.edu/redcap/api/"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  id_col_name      <span class="op">=</span> <span class="st">"record_id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIC RECORDS AND FIELDS FROM THE PROJECT</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source      <span class="op">=</span> <span class="st">"https://bbmc.ouhsc.edu/redcap/api/"</span>,</span>
<span>  credentials_file <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  records          <span class="op">=</span> <span class="va">records</span>,</span>
<span>  fields           <span class="op">=</span> <span class="va">fields</span>,</span>
<span>  id_col_name      <span class="op">=</span> <span class="st">"record_id"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">project_data</span>     <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">project_metadeta</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[[</span><span class="st">"metadata"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-data-from-dhis2">Importing data from DHIS2<a class="anchor" aria-label="anchor" href="#importing-data-from-dhis2"></a>
</h3>
<p><a href="https://dhis2.org/about/" class="external-link">DHIS2</a> is an open source
software that has transformed global health information management. The
<code><a href="../reference/readepi.html">readepi()</a></code> function can import data from DHIS2-based
repositories with following arguments:</p>
<ul>
<li>
<code>data_source</code>: the URL of the target DHIS2 system
(required)</li>
<li>
<code>credentials_file</code>: the credentials file (required)</li>
<li>
<code>dataset</code>: a vector or a comma-separated list of dataset
identifier (optional)</li>
<li>
<code>organisation_unit</code>: a vector or a comma-separated list
of organisation unit identifier (optional)<br>
</li>
<li>
<code>data_element_group</code>: a vector or a comma-separated list
of data element group (optional)<br>
</li>
<li>
<code>start_date</code>: the start date for the time span of the
values to export (required)<br>
</li>
<li>
<code>end_date</code>: the end date for the time span of the values
to export (required)<br>
</li>
<li>
<code>id_col_name</code>: the column name with the records of
interest (optional)<br>
</li>
<li>
<code>records</code>: the list of the desired records
(optional)<br>
</li>
<li>
<code>fields</code>: the list of the desired columns (optional)</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># GETTING THE DATA ELEMENT IDENTIFIERS AND NAMES</span></span>
<span><span class="va">data_elements</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dhis2_get_attributes.html">dhis2_get_attributes</a></span><span class="op">(</span></span>
<span>  base_url  <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev/"</span>,</span>
<span>  user_name <span class="op">=</span> <span class="st">"admin"</span>,</span>
<span>  password  <span class="op">=</span> <span class="st">"district"</span>,</span>
<span>  which     <span class="op">=</span> <span class="st">"dataElements"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GETTING THE DATASET IDENTIFIERS AND NAMES</span></span>
<span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dhis2_get_attributes.html">dhis2_get_attributes</a></span><span class="op">(</span></span>
<span>  base_url  <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev/"</span>,</span>
<span>  user_name <span class="op">=</span> <span class="st">"admin"</span>,</span>
<span>  password  <span class="op">=</span> <span class="st">"district"</span>,</span>
<span>  which     <span class="op">=</span> <span class="st">"dataSets"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GETTING THE ORGANISATION UNIT IDENTIFIERS AND NAMES</span></span>
<span><span class="va">organisation_units</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dhis2_get_attributes.html">dhis2_get_attributes</a></span><span class="op">(</span></span>
<span>  base_url  <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev/"</span>,</span>
<span>  user_name <span class="op">=</span> <span class="st">"admin"</span>,</span>
<span>  password  <span class="op">=</span> <span class="st">"district"</span>,</span>
<span>  which     <span class="op">=</span> <span class="st">"organisationUnits"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GETTING THE DATA ELEMENT GROUP IDENTIFIERS AND NAMES</span></span>
<span><span class="va">data_element_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dhis2_get_attributes.html">dhis2_get_attributes</a></span><span class="op">(</span></span>
<span>  base_url  <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev/"</span>,</span>
<span>  user_name <span class="op">=</span> <span class="st">"admin"</span>,</span>
<span>  password  <span class="op">=</span> <span class="st">"district"</span>,</span>
<span>  which     <span class="op">=</span> <span class="st">"dataElementGroups"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING THE DATASET ID `BfMAe6Itzgt`</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source        <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev"</span>,</span>
<span>  credentials_file   <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  dataset            <span class="op">=</span> <span class="st">"BfMAe6Itzgt"</span>,</span>
<span>  organisation_unit  <span class="op">=</span> <span class="st">"Umh4HKqqFp6"</span>,</span>
<span>  data_element_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date         <span class="op">=</span> <span class="st">"2014"</span>,</span>
<span>  end_date           <span class="op">=</span> <span class="st">"2023"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING DATA FROM 2 DATASETS `BfMAe6Itzgt`</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source        <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev"</span>,</span>
<span>  credentials_file   <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  dataset            <span class="op">=</span> <span class="st">"BfMAe6Itzgt,BfMAe6Itzgt"</span>,</span>
<span>  organisation_unit  <span class="op">=</span> <span class="st">"Umh4HKqqFp6"</span>,</span>
<span>  data_element_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date         <span class="op">=</span> <span class="st">"2014"</span>,</span>
<span>  end_date           <span class="op">=</span> <span class="st">"2023"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIC DATA ELEMENTS FROM THE DATASET ID `BfMAe6Itzgt`</span></span>
<span><span class="va">data_elts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FTRrcoaog83"</span>, <span class="st">"eY5ehpbEsB7"</span>, <span class="st">"Ix2HsbDMLea"</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source        <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev"</span>,</span>
<span>  credentials_file   <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  dataset            <span class="op">=</span> <span class="st">"BfMAe6Itzgt"</span>,</span>
<span>  organisation_unit  <span class="op">=</span> <span class="st">"Umh4HKqqFp6"</span>,</span>
<span>  data_element_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date         <span class="op">=</span> <span class="st">"2014"</span>,</span>
<span>  end_date           <span class="op">=</span> <span class="st">"2023"</span>,</span>
<span>  records            <span class="op">=</span> <span class="va">data_elts</span>,</span>
<span>  id_col_name        <span class="op">=</span> <span class="st">"dataElement"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># READING SPECIFIC COLUMNS FROM A DATASET</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  data_source        <span class="op">=</span> <span class="st">"https://play.dhis2.org/dev"</span>,</span>
<span>  credentials_file   <span class="op">=</span> <span class="va">credentials_file</span>,</span>
<span>  dataset            <span class="op">=</span> <span class="st">"BfMAe6Itzgt,BfMAe6Itzgt"</span>,</span>
<span>  organisation_unit  <span class="op">=</span> <span class="st">"Umh4HKqqFp6"</span>,</span>
<span>  data_element_group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_date         <span class="op">=</span> <span class="st">"2014"</span>,</span>
<span>  end_date           <span class="op">=</span> <span class="st">"2023"</span>,</span>
<span>  fields             <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataElement"</span>, <span class="st">"period"</span>, <span class="st">"value"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-data-from-fingertips">Importing data from Fingertips<a class="anchor" aria-label="anchor" href="#importing-data-from-fingertips"></a>
</h3>
<p><a href="https://fingertips.phe.org.uk/" class="external-link">Fingertips</a> is a
repository for public health data indicators in England, in which data
is organised into themed profiles. The <code><a href="../reference/readepi.html">readepi()</a></code> function
allows you to import data from Fingertips-based APIs using the following
arguments:</p>
<ul>
<li>
<code>indicator_id</code>: the indicator ID</li>
<li>
<code>indicator_name</code>: the indicator name</li>
<li>
<code>area_type_id</code>: the area type ID. This determines the
geographic area for the imported data (required)</li>
<li>
<code>parent_area_type_id</code>: the parent area type code of the
specified area type ID</li>
<li>
<code>profile_id</code>: the profile ID</li>
<li>
<code>profile_name</code>: the profile name</li>
<li>
<code>domain_id</code>: the domain ID</li>
<li>
<code>domain_name</code>: the domain name</li>
<li>
<code>records</code>: the list of the desired records<br>
</li>
<li>
<code>fields</code>: the list of the desired columns</li>
<li>
<code>id_col_name</code>: the column name with the records of
interest</li>
<li>
<code>id_position</code>: the column position of the variable that
unique identifies the subjects. default is 1.</li>
</ul>
<p>It is worth noting that, while reading such data, the
<code><a href="../reference/readepi.html">readepi()</a></code> function makes wrapper-calls to the major
functions in <a href="https://docs.ropensci.org/fingertipsR/" class="external-link">fingertipsR</a>, a
pre-existing R package that only reads data from Fingertips
databases.</p>
<div class="section level4">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a>
</h4>
<p>This section provides various examples demonstrating how
<strong>{readepi}</strong> imports data from Fingertips-based APIs.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># GET THE INFORMATION ABOUT THE INDICATOR PROFILES, DOMAIN, AREA TYPE, ...</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fingertips_get_metadata.html">fingertips_get_metadata</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">[[</span><span class="st">"indicator_profile_domain"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">[[</span><span class="st">"indicator_ids_names"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">[[</span><span class="st">"area_type"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA USING THE INDICATOR ID</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  indicator_id <span class="op">=</span> <span class="fl">90362L</span>,</span>
<span>  area_type_id <span class="op">=</span> <span class="fl">202L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA USING THE INDICATOR NAME</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  indicator_name <span class="op">=</span> <span class="st">"Healthy life expectancy at birth"</span>,</span>
<span>  area_type_id   <span class="op">=</span> <span class="fl">202L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA USING THE DOMAIN NAME</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  domain_name  <span class="op">=</span> <span class="st">"A. Overarching indicators"</span>,</span>
<span>  area_type_id <span class="op">=</span> <span class="fl">202L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  indicator_name <span class="op">=</span> <span class="st">"Healthy life expectancy at birth"</span>,</span>
<span>  area_type_id   <span class="op">=</span> <span class="fl">202L</span>,</span>
<span>  domain_name    <span class="op">=</span> <span class="st">"A. Overarching indicators"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA USING THE PROFILE ID</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  profile_id   <span class="op">=</span> <span class="fl">19L</span>,</span>
<span>  area_type_id <span class="op">=</span> <span class="fl">202L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA FROM SPECIFIC INDICATOR, DOMAIN, PROFILE, AREA TYPE</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  indicator_id        <span class="op">=</span> <span class="fl">90362L</span>,</span>
<span>  indicator_name      <span class="op">=</span> <span class="st">"Healthy life expectancy at birth"</span>,</span>
<span>  area_type_id        <span class="op">=</span> <span class="fl">202L</span>,</span>
<span>  parent_area_type_id <span class="op">=</span> <span class="fl">6L</span>,</span>
<span>  profile_id          <span class="op">=</span> <span class="fl">19L</span>,</span>
<span>  profile_name        <span class="op">=</span> <span class="st">"Public Health Outcomes Framework"</span>,</span>
<span>  domain_id           <span class="op">=</span> <span class="fl">1000049L</span>,</span>
<span>  domain_name         <span class="op">=</span> <span class="st">"A. Overarching indicators"</span>,</span>
<span>  fields              <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  records             <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_position         <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_col_name         <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># IMPORTING DATA AND SUBSETTING SPECIFIC RECORDS AND FIELDS</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readepi.html">readepi</a></span><span class="op">(</span></span>
<span>  indicator_id <span class="op">=</span> <span class="fl">90362L</span>,</span>
<span>  area_type_id <span class="op">=</span> <span class="fl">202L</span>,</span>
<span>  fields       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IndicatorID"</span>, <span class="st">"AreaCode"</span>, <span class="st">"Age"</span>, <span class="st">"Value"</span><span class="op">)</span>,</span>
<span>  records      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E92000001"</span>, <span class="st">"E12000002"</span>, <span class="st">"E12000009"</span><span class="op">)</span>,</span>
<span>  id_col_name  <span class="op">=</span> <span class="st">"AreaCode"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karim Mané, data.org.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
